---
title: Оптимизации
layout: post
category: Guides
permalink: /optimizations/
machine_translated: true
lang: ru
---
Ряд оптимизаций можно включить с помощью [аргументов командной строки](Запуск с пользовательскими параметрами):

| аргумент командной строки | объяснение |
|--------------------------------|---------------- -------------------------------------------------- -------------------------------------------------- -------------------------------------------------- -------------------------------------------------- -------------------------------------------------- -------------------------------------------------- -------------------------------------------------- -------------------------------------------------- ------|
| `--xformers` | Используйте библиотеку [xformers](https://github.com/facebookresearch/xformers). Большое улучшение потребления памяти и скорости. Версия для Windows устанавливает двоичные файлы, поддерживаемые [C43H66N12O12S2](https://github.com/C43H66N12O12S2/stable-diffusion-webui/releases). Будет включен только для небольшого подмножества конфигурации, потому что для этого у нас есть двоичные файлы. [Документация](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Xformers) |
| `--force-enable-xformers` | Включает xformers выше, независимо от того, считает ли программа, что вы можете запустить его или нет. Не сообщайте об ошибках, которые вы получаете при запуске этого. |
| `--опт-расщепление-внимание` | Оптимизация уровня перекрестного внимания значительно сокращает использование памяти практически бесплатно (некоторые сообщают об улучшении производительности с ее помощью). Черная магия. <br/>Включено по умолчанию для torch.cuda, который включает карты NVidia и AMD. |
| `--disable-opt-split-tention` | Отключает приведенную выше оптимизацию. |
| `--опт-расщепление-внимание-v1` | Использует более старую версию приведенной выше оптимизации, которая не так требовательна к памяти (будет использовать меньше видеопамяти, но будет больше ограничивать максимальный размер изображений, которые вы можете сделать). |
| `--медврам` | Заставляет модель Stable Diffusion потреблять меньше видеопамяти, разделяя ее на три части: cond (для преобразования текста в числовое представление), first_stage (для преобразования изображения в скрытое пространство и обратно) и unet (для фактического удаления шума из скрытого пространства) и делая это так, что только один всегда находится в VRAM, отправляя другие в RAM CPU. Снижает производительность, но только немного, за исключением случаев, когда включен предварительный просмотр в реальном времени. |
| `--lowvram` | Еще более тщательная оптимизация вышеперечисленного, разбиение unet на множество модулей, а в VRAM хранится только один модуль. Разрушительный для производительности. |
| `*do-not-batch-cond-uncond` | Предотвращает пакетирование положительных и отрицательных запросов во время выборки, что по существу позволяет вам работать с размером пакета 0,5, экономя много памяти. Снижает производительность. Не параметр командной строки, а оптимизация, неявно включенная с помощью `--medvram` или `--lowvram`. |
| `--always-batch-cond-uncond` | Отключает приведенную выше оптимизацию. Имеет смысл только вместе с `--medvram` или `--lowvram` |
| `--opt-channelslast` | Изменяет тип памяти факела для стабильной диффузии на последние каналы. Эффекты тщательно не изучены. |


Дополнительные советы (Windows):
- https://github.com/AUTOMATIC1111/stable-diffusion-webui/discussions/3889 Отключить аппаратное планирование графического процессора.
- отключить аппаратное ускорение браузера
- Зайдите в панель управления nvidia, параметры 3d и измените профиль мощности на «максимальную производительность».
