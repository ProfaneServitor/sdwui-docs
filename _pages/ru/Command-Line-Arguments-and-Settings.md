---
title: Аргументы и настройки командной строки
layout: post
category: Guides
permalink: /cli/
machine_translated: true
lang: ru
---
## webui-пользователь

Рекомендуемый способ настроить запуск программы — отредактировать файлы `webui-user.bat` (Windows) и `webui-user.sh` (Linux):
- `set PYTHON` позволяет установить собственный путь Python
- Пример: `set PYTHON=b:/soft/Python310/Python.exe`
- `set VENV_DIR` позволяет вам выбрать каталог для виртуальной среды. По умолчанию это `venv`. Специальное значение `-` запускает скрипт без создания виртуальной среды.
- Пример: `set VENV_DIR=C:\run\var\run` создаст venv в каталоге `C:\run\var\run`.
- Пример: `set VENV_DIR=-` запускает программу, используя системный python.
- `set COMMANDLINE_ARGS`, устанавливающий аргументы командной строки `webui.py`, запускается с
- Пример: `set COMMANDLINE_ARGS=--ckpt a.ckpt` использует модель `a.ckpt` вместо `model.ckpt`

## Аргументы командной строки
### Запуск онлайн
Используйте опцию `--share` для запуска онлайн. Вы получите ссылку xxx.app.gradio. Это предполагаемый способ использования программы в коллаборациях. Вы можете настроить аутентификацию для указанного общего экземпляра gradio с флагом `--gradio-auth username:password`, при необходимости указав несколько наборов имен пользователей и паролей, разделенных запятыми.

Используйте `--listen`, чтобы заставить сервер прослушивать сетевые соединения. Это позволит компьютерам в локальной сети получить доступ к пользовательскому интерфейсу, а если вы настроите переадресацию портов, также компьютерам в Интернете.

Используйте `--port xxxx`, чтобы заставить сервер прослушивать определенный порт, где xxxx является желаемым портом. Помните, что для всех портов ниже 1024 требуются права root/admin, по этой причине рекомендуется использовать порт выше 1024. По умолчанию используется порт 7860, если он доступен.

# Все аргументы командной строки

| Аргумент Команда | Значение | По умолчанию | Описание |
| ---------------- | ----- | ------- | ----------- |

| **КОНФИГУРАЦИЯ** |
-ч, --помощь | Нет | Ложь | показать это справочное сообщение и выйти |
--конфигурация | КОНФИГУРАЦИЯ | configs/stable-diffusion/v1-inference.yaml | путь к конфигу, который строит модель |
--ckpt | СКРТ | модель.ckpt | путь к контрольной точке модели стабильной диффузии; если указано, то эта контрольная точка будет добавлена ​​в список контрольных точек и загружена |
--ckpt-каталог | CKPT_DIR | Нет | Путь к каталогу со стабильными контрольными точками распространения |
--gfpgan-каталог| GFPGAN_DIR | ГФГАН/ | Каталог GFPGAN |
--gfpgan-модель| GFPGAN_MODEL | Имя файла модели GFPGAN |
--codeformer-models-путь | CODEFORMER_MODELS_PATH | модели/Кодформер/ | Путь к каталогу с файлами моделей codeformer. |
--gfpgan-модели-путь | GFPGAN_MODELS_PATH | модели/GFPGAN | Путь к каталогу с файлами модели GFPGAN. |
--esrgan-models-путь | ESRGAN_MODELS_PATH | модели/ЕСРГАН | Путь к каталогу с файлами модели ESRGAN. |
--bsrgan-models-путь | BSRGAN_MODELS_PATH | модели/BSRGAN | Путь к каталогу с файлами модели BSRGAN. |
--realesrgan-models-путь | REALESRGAN_MODELS_PATH | модели/RealESRGAN | Путь к каталогу с файлами модели RealESRGAN. |
--scunet-модели-путь | SCUNET_MODELS_PATH | модели/ScuNET | Путь к каталогу с файлами модели ScuNET. |
--swinir-модели-путь | SWINIR_MODELS_PATH | модели/SwinIR | Путь к каталогу с файлами моделей SwinIR и SwinIR v2. |
--ldsr-модели-путь | LDSR_MODELS_PATH | модели/ЛДСР | Путь к каталогу с файлами моделей LDSR. |
--клип-модели-путь | CLIP_MODELS_PATH | Нет | Путь к каталогу с файлами модели CLIP. |
--vae-путь | ВАЕ_ПУТЬ | Нет | Путь к модели вариационных автоэнкодеров |
--embeddings-dir | EMBEDDINGS_DIR | вложения/ | каталог embeddings для инверсии текста (по умолчанию: embeddings) |
--гиперсетевой-каталог | ГИПЕРСЕТЬ_КАТАЛОГ | модели/гиперсети/ | каталог гиперсети |
--localizations-dir | ЛОКАЛИЗАЦИИ_КАТАЛОГ | локализации/ | каталог локализаций
--стили-файл | СТИЛЬ_ФАЙЛ | стили.csv | имя файла для стилей |
--ui-файл конфигурации | UI_CONFIG_FILE | пользовательский интерфейс-config.json | имя файла для настройки пользовательского интерфейса |
--no-progressbar-скрытие | Нет | Ложь | не скрывать индикатор выполнения в пользовательском интерфейсе градиента (мы скрываем его, потому что он замедляет ML, если у вас есть аппаратное ускорение в браузере) |
--max-количество партий| MAX_BATCH_COUNT | 16 | максимальное значение счетчика пакетов для пользовательского интерфейса |
--ui-файл настроек | UI_SETTINGS_FILE | конфиг.json | имя файла для использования в настройках пользовательского интерфейса |
--разрешить-код | Нет | Ложь | разрешить выполнение пользовательского скрипта из webui |
--поделиться | Нет | Ложь | используйте share=True для градиента и сделайте пользовательский интерфейс доступным через их сайт (у меня не работает, но вам может повезти)
--слушать | Нет | Ложь | запустить градио с 0.0.0.0 в качестве имени сервера, позволяющего отвечать на сетевые запросы |
--порт | ПОРТ | 7860 | запустить gradio с заданным портом сервера, вам нужны права root/admin для портов < 1024, по умолчанию 7860, если доступно |
--hide-ui-dir-config | Нет | Ложь | скрыть конфигурацию каталога от webui |
--заморозить-настройки | Нет | Ложь | отключить редактирование настроек |
--enable-insecure-extension-access | Нет | Ложь | включить вкладку расширений независимо от других параметров |
--градио-отладка | Нет | Ложь | запустить градио с параметром --debug |
--градио-авторизация | GRADIO_AUTH | Нет | установить градиентную аутентификацию, например «имя пользователя: пароль»; или несколько с разделителями-запятыми, например "u1:p1,u2:p2,u3:p3" |
--gradio-img2img-инструмент | {цветной эскиз, редактор} | редактор | инструмент для загрузки изображений градио: может быть как редактор для ктоппинга, так и цветной эскиз для рисования |
--disable-console-progressbars | Нет | Ложь | не выводить индикаторы выполнения на консоль |
--enable-console-prompts | Нет | Ложь | print запрашивает консоль при создании с помощью txt2img и img2img |
--апи | Нет | Ложь | запустить webui через API |
--новебуи | Нет | Ложь | запускать только API, без пользовательского интерфейса |
--ui-режим отладки | Нет | Ложь | Не загружайте модель для быстрого запуска пользовательского интерфейса |
--идентификатор устройства | ИДЕНТИФИКАТОР_УСТРОЙСТВА | Нет | Выберите устройство CUDA по умолчанию для использования (ранее может потребоваться экспорт CUDA_VISIBLE_DEVICES=0,1 и т. д.) |
--администратор | Нет | Ложь | Права администратора |
| **ЭФФЕКТИВНОСТЬ** |
--xformers | Нет | Ложь | включить xformers для слоев перекрестного внимания |
--reinstall-xformers | Нет | Ложь | принудительно переустановите xformers. Полезно для обновления, но удалите его после обновления, иначе вы будете постоянно переустанавливать xformers. |
--force-enable-xformers | Нет | Ложь | включите xformers для слоев перекрестного внимания независимо от того, считает ли проверяющий код, что вы можете его запустить; *** не сообщайте об ошибках, если это не работает *** |
--opt-split-внимание | Нет | Ложь | force-включает оптимизацию уровня перекрестного внимания Doggettx. По умолчанию он включен для систем с поддержкой cuda. |
--opt-split-invokeai | Нет | Ложь | force-включает оптимизацию уровня перекрестного внимания InvokeAI. По умолчанию он включен, когда cuda недоступен. |
--opt-split-внимание-v1 | Нет | Ложь | включить старую версию оптимизации разделения внимания, которая не потребляет всю VRAM, которую может найти |
--opt-каналыпоследний | Нет | Ложь | изменить тип памяти для стабильной диффузии на последние каналы |
--disable-opt-split-attention | Нет | Ложь | принудительно отключает оптимизацию уровня перекрестного внимания |
--использовать-процессор | {all, sd, опрос, gfpgan, bsrgan, esrgan, scunet, codeformer} | Нет | использовать ЦП в качестве устройства-факела для указанных модулей |
--без половины | Нет | Ложь | не переключать модель на 16-битные числа с плавающей запятой |
--точность | {полный, автозапуск} | автотрансляция | оценить с этой точностью |
--no-half-vae | Нет | Ложь | не переключать модель VAE на 16-битные числа с плавающей запятой |
--медврам | Нет | Ложь | включить стабильную оптимизацию диффузионной модели, чтобы пожертвовать небольшой скоростью ради низкого использования VRM |
--лоуврам | Нет | Ложь | включить стабильную оптимизацию диффузионной модели, чтобы пожертвовать большой скоростью ради очень низкого использования VRM |
--lowram | Нет | Ложь | загружать стабильные веса контрольных точек диффузии во VRAM вместо RAM
--always-batch-cond-uncond | Нет | Ложь | отключает пакетирование с условием/неусловием, которое включено для экономии памяти с --medvram или --lowvram
| **ОСОБЕННОСТИ** |
--автозапуск | Нет | Ложь | открыть URL-адрес webui в системном браузере по умолчанию при запуске |
--тема | Нет | Снять | открыть webui с указанной темой ("светлая" или "темная"). Если не указано, использует тему браузера по умолчанию |
--use-textbox-seed | Нет | Ложь | использовать текстовое поле для начальных значений в пользовательском интерфейсе (без вверх/вниз, но можно вводить длинные начальные значения) |
--disable-safe-unpickle | Нет | Ложь | отключить проверку моделей pytorch на наличие вредоносного кода |
--нгрок | НГРОК | Снять | ngrok authtoken, альтернатива gradio --share
--ngrok-регион | NGROK_REGION | Снять | Регион, в котором должен запускаться ngrok.
| **НЕФУНКЦИОНАЛЬНЫЕ ВАРИАНТЫ** |
--show-negative-prompt | Нет | Ложь | ничего не делает |
--дипданбору | Нет | Ложь | ничего не делает |
--выгрузить-gfpgan | Нет | Ложь | ничего не делает.
