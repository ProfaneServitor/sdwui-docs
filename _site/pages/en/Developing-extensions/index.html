<!DOCTYPE HTML>
<html lang="en" >
    <head><meta charset="UTF-8">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"><title>Developing extensions ¬∑ Stable Diffusion webUI</title><meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="description" content="A browser interface based on Gradio library for Stable Diffusion.
"><meta name="generator" content="Jekyll (using style of GitBook 3.2.3)"><link rel="stylesheet" href="/sdwui-docs/assets/gitbook/style.css">
<link rel="stylesheet" href="/sdwui-docs/assets/gitbook/gitbook-plugin-fontsettings/website.css">
<link rel="stylesheet" href="/sdwui-docs/assets/gitbook/gitbook-plugin-search-pro/search.css">
<link rel="stylesheet" href="/sdwui-docs/assets/gitbook/gitbook-plugin-back-to-top-button/plugin.css">

<link rel="stylesheet" href="/sdwui-docs/assets/gitbook/rouge/colorful.css">

<link rel="stylesheet" href="/sdwui-docs/assets/gitbook/custom.css">

<meta name="HandheldFriendly" content="true"/>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="/sdwui-docs/assets/gitbook/images/apple-touch-icon-precomposed-152.png">
<link rel="shortcut icon" href="/sdwui-docs//assets/gitbook/images/favicon.ico" type="image/x-icon">




            <link rel="prev" href="/sdwui-docs/pages/en/Developing-custom-scripts/" />
        

        
            <link rel="next" href="/sdwui-docs/pages/en/Extensions/" />
        
    </head>
    <body>
        <div class="book">
<div class="book-summary">
    <nav role="navigation">
        <div id="lang">
<a style="font-weight: bold;" href="/sdwui-docs/pages/en/Developing-extensions/"><img class="emoji" title=":uk:" alt=":uk:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f1ec-1f1e7.png" height="20" width="20"> en</a> | <a href="/sdwui-docs/ru/pages/en/Developing-extensions/"><img class="emoji" title=":ru:" alt=":ru:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f1f7-1f1fa.png" height="20" width="20"> ru</a> | <a href="/sdwui-docs/de/pages/en/Developing-extensions/"><img class="emoji" title=":de:" alt=":de:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f1e9-1f1ea.png" height="20" width="20"> de</a> | <br>
</div>
        <div id="book-search-input" role="search">
            <input type="text" placeholder="Type to search">
        </div>
        <div id="book-search-input-link" role="search">
            <a href="/sdwui-docs/assets/search.html">Click to Search</a>
        </div>
        <ul class="summary">
            
            <li class="chapter" data-level="1.1" data-path="/sdwui-docs">
            
                <!-- <a href="/sdwui-docs/">
                    Stable Diffusion webUI
                </a> -->
            </li>

            <!-- <li class="divider"></li> -->


                    
                    
                    <li>
                      <h2>Getting started</h2>
                      </li>
                      
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/pages/en/Dependencies/">
                          
                              <a href="/sdwui-docs/pages/en/Dependencies/">
                                  dependencies
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/pages/en/Install-and-Run-on-AMD-GPUs/">
                          
                              <a href="/sdwui-docs/pages/en/Install-and-Run-on-AMD-GPUs/">
                                  install on AMD
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/pages/en/Install-and-Run-on-NVidia-GPUs/">
                          
                              <a href="/sdwui-docs/pages/en/Install-and-Run-on-NVidia-GPUs/">
                                  install on Nvidia
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/pages/en/Installation-on-Apple-Silicon/">
                          
                              <a href="/sdwui-docs/pages/en/Installation-on-Apple-Silicon/">
                                  install on Apple
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/">
                          
                              <a href="/sdwui-docs/">
                                  Stable Diffusion webUI
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/install/">
                          
                              <a href="/sdwui-docs/install/">
                                  Install
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/online-services/">
                          
                              <a href="/sdwui-docs/online-services/">
                                  Online services
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/ui-defaults/">
                          
                              <a href="/sdwui-docs/ui-defaults/">
                                  Changing UI defaults
                              </a>
                              
                                  
                              
                          </li>
                      
                      <li class="divider">
                    
                    </li>
<li>
                      <h2>Guides</h2>
                      </li>
                      
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/pages/en/Command-Line-Arguments-and-Settings/">
                          
                              <a href="/sdwui-docs/pages/en/Command-Line-Arguments-and-Settings/">
                                  Command line arguments and settings
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/pages/en/Custom-Images-Filename-Name-and-Subdirectory/">
                          
                              <a href="/sdwui-docs/pages/en/Custom-Images-Filename-Name-and-Subdirectory/">
                                  Custom images filename and subdirectory
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/pages/en/Custom-Scripts/">
                          
                              <a href="/sdwui-docs/pages/en/Custom-Scripts/">
                                  Custom scripts
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/pages/en/Developing-custom-scripts/">
                          
                              <a href="/sdwui-docs/pages/en/Developing-custom-scripts/">
                                  Developing custom scripts
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/pages/en/Extensions/">
                          
                              <a href="/sdwui-docs/pages/en/Extensions/">
                                  Extensions
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/pages/en/Features/">
                          
                              <a href="/sdwui-docs/pages/en/Features/">
                                  Features
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/pages/en/List-of-Time-Zones/">
                          
                              <a href="/sdwui-docs/pages/en/List-of-Time-Zones/">
                                  List of time zones
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/pages/en/Localization/">
                          
                              <a href="/sdwui-docs/pages/en/Localization/">
                                  Localization
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/pages/en/Negative-prompt/">
                          
                              <a href="/sdwui-docs/pages/en/Negative-prompt/">
                                  Negative prompt
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/pages/en/Optimizations/">
                          
                              <a href="/sdwui-docs/pages/en/Optimizations/">
                                  Optimizations
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/pages/en/Textual-Inversion/">
                          
                              <a href="/sdwui-docs/pages/en/Textual-Inversion/">
                                  Textual inversion
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/pages/en/Troubleshooting/">
                          
                              <a href="/sdwui-docs/pages/en/Troubleshooting/">
                                  Troubleshooting
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/pages/en/Xformers/">
                          
                              <a href="/sdwui-docs/pages/en/Xformers/">
                                  Xformers
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/api/">
                          
                              <a href="/sdwui-docs/api/">
                                  API guide
                              </a>
                              
                                  
                              
                          </li>
                      
                      <li class="divider">
                    
                    </li>
<li>
                      <h2>development</h2>
                      </li>
                      
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/pages/en/Contributing/">
                          
                              <a href="/sdwui-docs/pages/en/Contributing/">
                                  Contributing
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter active" data-level="1.2" data-path="/sdwui-docs/pages/en/Developing-extensions/">
                          
                              <a href="/sdwui-docs/pages/en/Developing-extensions/">
                                  Developing extensions
                              </a>
                              
                                  
                                      <ul>
<li><a href="#localization-extensions">Localization extensions</a></li>
<li><a href="#installpy">install.py</a></li>
</ul>

                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/pages/en/Tests/">
                          
                              <a href="/sdwui-docs/pages/en/Tests/">
                                  Optimizations
                              </a>
                              
                                  
                              
                          </li>
                      
                      <li class="divider">
                    

                    

            <!-- <li>
                <a href="https://github.com/sighingnow/jekyll-gitbook/fork" target="blank" class="gitbook-link">
                    Fork it Now!
                </a>
            </li> -->
            </li>
<li><h2>Release notes</h2></li>
            
              <li>
                <a href="/sdwui-docs/2022-12-27-my-new-post.html">
                  Release note example
                </a>
              </li>
            
        </ul>
    </nav>
</div>
<div class="book-body">
                <div class="book-header" role="navigation">
                    <!-- Title -->
                    <h1>
                        <i class="fa fa-circle-o-notch fa-spin"></i>
                        
                            <a href=".">Developing extensions</a>
                        
                    </h1>
                </div>

                <div class="body-inner">
<div class="page-wrapper" tabindex="-1" role="main">
    

    <div class="page-inner">
        <div id="book-search-results">
            <div class="search-noresults">
                <section class="normal markdown-section">
                    
                        <h1 id="/pages/en/Developing-extensions">Developing extensions</h1>
                    

                    <p>An extension is just a subdirectory in the <code class="language-plaintext highlighter-rouge">extensions</code> directory.</p>

<p>Web ui interacts with installed extensions in the following way:</p>

<ul>
  <li>extension‚Äôs <code class="language-plaintext highlighter-rouge">install.py</code> script, if it exists, is executed.</li>
  <li>extension‚Äôs scripts in the <code class="language-plaintext highlighter-rouge">scripts</code> directory are executed as if they were just usual user scripts, except:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">sys.path</code> is extended to include the extension directory, so you can import anything in it without worrying</li>
      <li>you can use <code class="language-plaintext highlighter-rouge">scripts.basedir()</code> to get the current extension‚Äôs directory (since user can name it anything he wants)</li>
    </ul>
  </li>
  <li>extension‚Äôs javascript files in the <code class="language-plaintext highlighter-rouge">javascript</code> directory are added to the page</li>
  <li>extension‚Äôs localization files in the <code class="language-plaintext highlighter-rouge">localizations</code> directory are added to settings; if there are two localizations with same name, they are not merged, one replaces another.</li>
  <li>extension‚Äôs <code class="language-plaintext highlighter-rouge">style.css</code> file is added to the page</li>
  <li>if extension has <code class="language-plaintext highlighter-rouge">preload.py</code> file in its root directory, it is loaded before parsing commandline args</li>
  <li>if extension‚Äôs <code class="language-plaintext highlighter-rouge">preload.py</code> has a <code class="language-plaintext highlighter-rouge">preload</code> function, it is called, and commandline args parser is passed to it as an argument. Here‚Äôs an example of how to use it to add a command line argument:
    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">preload</span><span class="p">(</span><span class="n">parser</span><span class="p">):</span>
  <span class="n">parser</span><span class="p">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">"--wildcards-dir"</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">"directory with wildcards"</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
</ul>

<p>For how to develop custom scripts, which usually will do most of extension‚Äôs work, see <a href="../Developing-custom-scripts">Developing custom scripts</a>.</p>

<h2 id="localization-extensions">Localization extensions</h2>
<p>The preferred way to do localizations for the project is via making an extension. The basic file structure for the extension should be:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 üìÅ webui root directory
 ‚îó‚îÅ‚îÅ üìÅ extensions
     ‚îó‚îÅ‚îÅ üìÅ webui-localization-la_LA        &lt;----- name of extension
         ‚îó‚îÅ‚îÅ üìÅ localizations                &lt;----- the single directory inside the extension
             ‚îó‚îÅ‚îÅ üìÑ la_LA.json              &lt;----- actual file with translations
</code></pre></div></div>

<p>Create a github repository with this file structure and ask any of people listed in collaborators section to add your extension to wiki.</p>

<p>If your language needs javascript/css or even python support, you can add that to the extension too.</p>

<h2 id="installpy">install.py</h2>
<p><code class="language-plaintext highlighter-rouge">install.py</code> is the script that is launched by the <code class="language-plaintext highlighter-rouge">launch.py</code>, the launcher, in a separate process before webui starts, and it‚Äôs meant to install dependencies of the extension. It must be located in the root directory of the extension, not in the scripts directory. The script is launched with <code class="language-plaintext highlighter-rouge">PYTHONPATH</code> environment variable set to webui‚Äôs path, so you can just <code class="language-plaintext highlighter-rouge">import launch</code> and use its functionality:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">launch</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">launch</span><span class="p">.</span><span class="n">is_installed</span><span class="p">(</span><span class="s">"aitextgen"</span><span class="p">):</span>
    <span class="n">launch</span><span class="p">.</span><span class="n">run_pip</span><span class="p">(</span><span class="s">"install aitextgen==0.6.0"</span><span class="p">,</span> <span class="s">"requirements for MagicPrompt"</span><span class="p">)</span>
</code></pre></div></div>

                </section>
            </div>
<div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title">
<span class="search-results-count"></span> results matching "<span class="search-query"></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class="search-query"></span>"</h1>
    </div>
</div>
</div>
    </div>
</div>

<script>
MathJax = {
  tex: {
    inlineMath: [ ['$', '$'], ['\\(', '\\)'] ]
  },
  svg: {
    fontCache: 'global'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>

                        <a href="/sdwui-docs/pages/en/Developing-custom-scripts/" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Developing custom scripts">
                            <i class="fa fa-angle-left"></i>
                        </a>
                    

                    
                        <a href="/sdwui-docs/pages/en/Extensions/" class="navigation navigation-next navigation-unique" aria-label="Next page: Extensions">
                            <i class="fa fa-angle-right"></i>
                        </a>
                    
                </div>
            </div>

            <script>
            var gitbook = gitbook || [];
            gitbook.push(function() {
                gitbook.page.hasChanged({
    "page": {
        "title": "Introduction",
        "level": "1.1",
        "depth": 1,
        
        "next": {
            "title": "Extensions",
            "level": "1.2",
            "depth": 1,
            "path": "_pages/en/Extensions.md",
            "ref": "_pages/en/Extensions.md",
            "articles": []
        },
        
        "dir": "ltr"
    },    "config": {
        "plugins": ["fontsettings", "highlight", "livereload", "lunr", "search", "sharing", "theme-default", "livereload"],
        "styles": {
            "ebook": "styles/ebook.css",
            "epub": "styles/epub.css",
            "mobi": "styles/mobi.css",
            "pdf": "styles/pdf.css",
            "print": "styles/print.css",
            "website": "styles/website.css"
        },
        "pluginsConfig": {
            "fontsettings": {
                "family": "sans",
                "size": 2,
                "theme": "white"
            },
            "highlight": {},
            "livereload": {},
            "lunr": {
                "ignoreSpecialCharacters": false,
                "maxIndexSize": 1000000
            },
            "search": {},            "sharing": {
                "all": ["facebook", "google", "twitter", "weibo", "instapaper", "github", "telegram"],
                "facebook": true,
                "google": false,
                "github": true,
                "github_link": "https://github.com",
                "telegram": false,
                "telegram_link": "https://t.me",
                "instapaper": false,
                "twitter": true,
                "vk": false,
                "weibo": false
            },
"theme-default": {
                "showLevel": false,
                "styles": {
                    "ebook": "styles/ebook.css",
                    "epub": "styles/epub.css",
                    "mobi": "styles/mobi.css",
                    "pdf": "styles/pdf.css",
                    "print": "styles/print.css",
                    "website": "styles/website.css"
                }
            }
        },
        "theme": "default",
        "author": "Tao He",
        "pdf": {
            "pageNumbers": true,
            "fontSize": 12,
            "fontFamily": "Arial",
            "paperSize": "a4",
            "chapterMark": "pagebreak",
            "pageBreaksBefore": "/",
            "margin": {
                "right": 62,
                "left": 62,
                "top": 56,
                "bottom": 56
            }
        },
        "structure": {
            "langs": "LANGS.md",
            "readme": "README.md",
        },
        "variables": {},
        "title": "Stable Diffusion webUI",
        "language": "en",
        "gitbook": "*"
    },
    "file": {
        "path": "_pages/en/Developing-extensions.md",
        "mtime": "",
        "type": "markdown"
    },
    "gitbook": {
        "version": "3.2.3",
        "time": "2022-12-27 03:21:37 +0300"
    },
    "basePath": "/sdwui-docs",
    "book": {
        "language": ""
    }
});
            });
            </script>
        </div><script src="/sdwui-docs/assets/gitbook/gitbook.js"></script>
<script src="/sdwui-docs/assets/gitbook/theme.js"></script>

<script src="/sdwui-docs/assets/gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
<script src="/sdwui-docs/assets/gitbook/gitbook-plugin-sharing/buttons.js"></script>

<!-- <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
<script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
<script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
<script src="../gitbook/gitbook-plugin-search/search.js"></script> -->

<script src="/sdwui-docs/assets/gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
<script src="/sdwui-docs/assets/gitbook/gitbook-plugin-search-pro/search.js"></script>
<script src="/sdwui-docs/assets/gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>

</body>
</html>