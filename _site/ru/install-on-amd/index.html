<!DOCTYPE HTML>
<html lang="en" >
    <head><meta charset="UTF-8">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"><title>установить на амд · Stable Diffusion webUI</title><meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="description" content="A browser interface based on Gradio library for Stable Diffusion.
"><meta name="generator" content="Jekyll (using style of GitBook 3.2.3)"><link rel="stylesheet" href="/sdwui-docs/ru/assets/gitbook/style.css">
<link rel="stylesheet" href="/sdwui-docs/ru/assets/gitbook/gitbook-plugin-fontsettings/website.css">
<link rel="stylesheet" href="/sdwui-docs/ru/assets/gitbook/gitbook-plugin-search-pro/search.css">
<link rel="stylesheet" href="/sdwui-docs/ru/assets/gitbook/gitbook-plugin-back-to-top-button/plugin.css">

<link rel="stylesheet" href="/sdwui-docs/ru/assets/gitbook/rouge/colorful.css">

<link rel="stylesheet" href="/sdwui-docs/ru/assets/gitbook/custom.css">

<meta name="HandheldFriendly" content="true"/>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="/sdwui-docs/ru/assets/gitbook/images/apple-touch-icon-precomposed-152.png">
<link rel="shortcut icon" href="/sdwui-docs/ru//assets/gitbook/images/favicon.ico" type="image/x-icon">




            <link rel="prev" href="/sdwui-docs/ru/features/" />
        

        
            <link rel="next" href="/sdwui-docs/ru/install-on-nvidia/" />
        
    </head>
    <body>
        <div class="book">
<div class="book-summary">
    <nav role="navigation">
        <div id="lang">
<a href="/sdwui-docs/install-on-amd/"><img class="emoji" title=":uk:" alt=":uk:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f1ec-1f1e7.png" height="20" width="20"> en</a> | <a style="font-weight: bold;" href="/sdwui-docs/ru/install-on-amd/"><img class="emoji" title=":ru:" alt=":ru:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f1f7-1f1fa.png" height="20" width="20"> ru</a> | <a href="/sdwui-docs/de/install-on-amd/"><img class="emoji" title=":de:" alt=":de:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f1e9-1f1ea.png" height="20" width="20"> de</a> | <br>
</div>
        <div id="book-search-input" role="search">
            <input type="text" placeholder="Type to search">
        </div>
        <div id="book-search-input-link" role="search">
            <a href="/sdwui-docs/ru/assets/search.html">Click to Search</a>
        </div>
        <ul class="summary">
            
            <li class="chapter" data-level="1.1" data-path="/sdwui-docs">
            
                <!-- <a href="/sdwui-docs/ru/">
                    Stable Diffusion webUI
                </a> -->
            </li>

            <!-- <li class="divider"></li> -->


                    
                    
                    <li>
                      <h2>Guides</h2>
                      </li>
                      
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/cli/">
                          
                              <a href="/sdwui-docs/ru/cli/">
                                  Аргументы и настройки командной строки
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/custom-filenames/">
                          
                              <a href="/sdwui-docs/ru/custom-filenames/">
                                  Имя файла и подкаталог пользовательских изображений
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/custom-scripts/">
                          
                              <a href="/sdwui-docs/ru/custom-scripts/">
                                  Пользовательские скрипты
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/developing-custom-scripts/">
                          
                              <a href="/sdwui-docs/ru/developing-custom-scripts/">
                                  Разработка пользовательских скриптов
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/extensions/">
                          
                              <a href="/sdwui-docs/ru/extensions/">
                                  Расширения
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/features/">
                          
                              <a href="/sdwui-docs/ru/features/">
                                  Функции
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/list-of-time-zones/">
                          
                              <a href="/sdwui-docs/ru/list-of-time-zones/">
                                  Список часовых поясов
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/localization/">
                          
                              <a href="/sdwui-docs/ru/localization/">
                                  Локализация
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/negative-prompt/">
                          
                              <a href="/sdwui-docs/ru/negative-prompt/">
                                  Отрицательное приглашение
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/optimizations/">
                          
                              <a href="/sdwui-docs/ru/optimizations/">
                                  Optimizations
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/textual-inversion/">
                          
                              <a href="/sdwui-docs/ru/textual-inversion/">
                                  Текстовая инверсия
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/troubleshooting/">
                          
                              <a href="/sdwui-docs/ru/troubleshooting/">
                                  Исправление проблем
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/xformers/">
                          
                              <a href="/sdwui-docs/ru/xformers/">
                                  Иксформеры
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/api/">
                          
                              <a href="/sdwui-docs/ru/api/">
                                  API guide
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/pages/ru/Optimizations/">
                          
                              <a href="/sdwui-docs/ru/pages/ru/Optimizations/">
                                  Оптимизации
                              </a>
                              
                                  
                              
                          </li>
                      
                      <li class="divider">
                    
                    </li>
<li>
                      <h2>development</h2>
                      </li>
                      
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/contributing/">
                          
                              <a href="/sdwui-docs/ru/contributing/">
                                  Содействие
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/developing-extensions/">
                          
                              <a href="/sdwui-docs/ru/developing-extensions/">
                                  Разработка расширений
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/pages/ru/Tests/">
                          
                              <a href="/sdwui-docs/ru/pages/ru/Tests/">
                                  Тесты
                              </a>
                              
                                  
                              
                          </li>
                      
                      <li class="divider">
                    
                    </li>
<li>
                      <h2>Getting started</h2>
                      </li>
                      
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/dependencies/">
                          
                              <a href="/sdwui-docs/ru/dependencies/">
                                  зависимости
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter active" data-level="1.2" data-path="/sdwui-docs/install-on-amd/">
                          
                              <a href="/sdwui-docs/ru/install-on-amd/">
                                  установить на амд
                              </a>
                              
                                  
                                      <ul>
<li><a href="#%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82-%D0%B8%D0%B7%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE">Работает изначально</a></li>
<li><a href="#%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA-%D0%B2%D0%BD%D1%83%D1%82%D1%80%D0%B8-docker">Запуск внутри Docker</a></li>
</ul>

                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/install-on-nvidia/">
                          
                              <a href="/sdwui-docs/ru/install-on-nvidia/">
                                  установить на нвидиа
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/install-on-apple/">
                          
                              <a href="/sdwui-docs/ru/install-on-apple/">
                                  установить на Apple
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/">
                          
                              <a href="/sdwui-docs/ru/">
                                  Стабильный диффузионный веб-интерфейс
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/install/">
                          
                              <a href="/sdwui-docs/ru/install/">
                                  Установить
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/online-services/">
                          
                              <a href="/sdwui-docs/ru/online-services/">
                                  Онлайн-сервисы
                              </a>
                              
                                  
                              
                          </li>
                      
                          
                          <li class="chapter" data-level="1.1" data-path="/sdwui-docs/ui-defaults/">
                          
                              <a href="/sdwui-docs/ru/ui-defaults/">
                                  Изменение настроек интерфейса
                              </a>
                              
                                  
                              
                          </li>
                      
                      <li class="divider">
                    

                    

            <!-- <li>
                <a href="https://github.com/sighingnow/jekyll-gitbook/fork" target="blank" class="gitbook-link">
                    Fork it Now!
                </a>
            </li> -->
            </li>
<li><h2>Release notes</h2></li>
            
              <li>
                <a href="/sdwui-docs/ru/2022/12/27/my-new-post/">
                  Release note example
                </a>
              </li>
            
        </ul>
    </nav>
</div>
<div class="book-body">
                <div class="book-header" role="navigation">
                    <!-- Title -->
                    <h1>
                        <i class="fa fa-circle-o-notch fa-spin"></i>
                        
                            <a href=".">установить на амд</a>
                        
                    </h1>
                </div>

                <div class="body-inner">
<div class="page-wrapper" tabindex="-1" role="main">
    

    <div class="page-inner">
        <div id="book-search-results">
            <div class="search-noresults">
                <section class="normal markdown-section">
                    
                        <h1 id="/Install-and-Run-on-AMD-GPUs">установить на амд</h1>
                    

                    
                      <div style="border: 1px dashed red; width: 100%; padding: 1em;">
  <b><img class="emoji" title=":robot:" alt=":robot:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f916.png" height="20" width="20"> This page have been translated automatically. If you want to improve this translation and remove this warning,
    see <a href="https://github.com/ProfaneServitor/sdwui-docs">project's repository</a></b>
</div>

                    
                    <p>Инструкции ниже работают только в Linux! Альтернативное руководство для пользователя Windows можно найти [здесь] (https://rentry.org/ayymd-stable-diffustion-v1_4-guide) (непроверено).</p>

<h1 id="работает-изначально">Работает изначально</h1>

<p>Выполните следующее:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui
<span class="nb">cd </span>stable-diffusion-webui
python <span class="nt">-m</span> venv venv
<span class="nb">source </span>venv/bin/activate
python <span class="nt">-m</span> pip <span class="nb">install</span> <span class="nt">--upgrade</span> pip wheel

<span class="c"># It's possible that you don't need "--precision full", dropping "--no-half" however crashes my drivers</span>
<span class="nv">TORCH_COMMAND</span><span class="o">=</span><span class="s1">'pip install torch torchvision --extra-index-url https://download.pytorch.org/whl/rocm5.1.1'</span> python launch.py <span class="nt">--precision</span> full <span class="nt">--no-half</span>
</code></pre></div></div>

<p>В следующих прогонах вам нужно будет выполнить только:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>stable-diffusion-webui
<span class="c"># Optional: "git pull" to update the repository</span>
<span class="nb">source </span>venv/bin/activate

<span class="c"># It's possible that you don't need "--precision full", dropping "--no-half" however crashes my drivers</span>
<span class="nv">TORCH_COMMAND</span><span class="o">=</span><span class="s1">'pip install torch torchvision --extra-index-url https://download.pytorch.org/whl/rocm5.1.1'</span> python launch.py <span class="nt">--precision</span> full <span class="nt">--no-half</span>
</code></pre></div></div>

<p>Первое поколение после запуска WebUI может занять очень много времени, и вы можете увидеть сообщение, похожее на это:</p>
<blockquote>
  <p>MIOpen(HIP): Предупреждение [SQLiteBase] Отсутствует файл системной базы данных: gfx1030_40.kdb Производительность может ухудшиться. Пожалуйста, следуйте
инструкции по установке: https://github.com/ROCmSoftwarePlatform/MIOpen#installing-miopen-kernels-package</p>
</blockquote>

<p>Следующие поколения должны работать с регулярной производительностью. Вы можете перейти по ссылке в сообщении, и если вдруг
чтобы использовать ту же операционную систему, выполните описанные здесь действия, чтобы устранить эту проблему. Если нет четкого способа компиляции или
установите ядра MIOpen для вашей операционной системы, рассмотрите возможность следования приведенному ниже руководству «Запуск внутри Docker».</p>

<h1 id="запуск-внутри-docker">Запуск внутри Docker</h1>
<p>Извлеките последний образ Docker <code class="language-plaintext highlighter-rouge">rocm/pytorch</code>, запустите образ и прикрепите его к контейнеру (взято из <code class="language-plaintext highlighter-rouge">rocm/pytorch</code>
документация): <code class="language-plaintext highlighter-rouge">docker run -it --network=host --device=/dev/kfd --device=/dev/dri --group-add=video --ipc=host
--cap-add=SYS_PTRACE --security-opt seccomp=unconfined -v $HOME/dockerx:/dockerx rocm/pytorch</code></p>

<p>Выполните следующее внутри контейнера:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> /dockerx
git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui
<span class="nb">cd </span>stable-diffusion-webui
python <span class="nt">-m</span> venv venv
<span class="nb">source </span>venv/bin/activate
python <span class="nt">-m</span> pip <span class="nb">install</span> <span class="nt">--upgrade</span> pip wheel

<span class="c"># It's possible that you don't need "--precision full", dropping "--no-half" however crashes my drivers</span>
<span class="nv">TORCH_COMMAND</span><span class="o">=</span><span class="s1">'pip install torch torchvision --extra-index-url https://download.pytorch.org/whl/rocm5.1.1'</span> <span class="nv">REQS_FILE</span><span class="o">=</span><span class="s1">'requirements.txt'</span> python launch.py <span class="nt">--precision</span> full <span class="nt">--no-half</span>
</code></pre></div></div>

<p>Следующие запуски потребуют от вас только перезапустить контейнер, снова подключиться к нему и выполнить следующее внутри
container: найдите имя контейнера в этом списке: <code class="language-plaintext highlighter-rouge">docker container ls --all</code>, выберите тот, который соответствует
<code class="language-plaintext highlighter-rouge">rocm/pytorch</code>, перезапустите его: <code class="language-plaintext highlighter-rouge">docker container restart &lt;container-id&gt;</code>, затем подключитесь к нему: `docker exec -it</p>
&lt;идентификатор-контейнера&gt; bash`.

```bash
cd /dockerx/stable-diffusion-webui
# Optional: "git pull" to update the repository
source venv/bin/activate

# It's possible that you don't need "--precision full", dropping "--no-half" however crashes my drivers
TORCH_COMMAND='pip install torch torchvision --extra-index-url https://download.pytorch.org/whl/rocm5.1.1' REQS_FILE='requirements.txt' python launch.py --precision full --no-half
```

Папка `/dockerx` внутри контейнера должна быть доступна в вашем домашнем каталоге под тем же именем.

## Обновление версии Python внутри Docker
Если веб-интерфейс становится несовместимым с предустановленной версией Python 3.7 внутри образа Docker, вот
инструкции по его обновлению (при условии, что вы успешно выполнили «Запуск внутри Docker»):

Выполните следующее внутри контейнера:
```bash
apt install python3.9-full # Confirm every prompt
update-alternatives --install /usr/local/bin/python python /usr/bin/python3.9 1
echo 'PATH=/usr/local/bin:$PATH' &gt;&gt; ~/.bashrc
```

Затем перезапустите контейнер и снова подключитесь. Если вы проверите `python --version`, теперь должно быть написано `Python 3.9.5` или новее.

Запустите rm -rf /dockerx/stable-diffusion-webui/venv внутри контейнера, а затем следуйте инструкциям в разделе «Запуск внутри
Docker», пропуская «git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui» и используя модифицированный
вместо этого запустите команду ниже:

```bash
TORCH_COMMAND='pip install torch torchvision --extra-index-url https://download.pytorch.org/whl/rocm5.1.1' python launch.py --precision full --no-half
```
Возможно, вам не нужно "--precision full", убрав "--no-half", однако это может не сработать для всех.
Некоторые карты, такие как Radeon RX 6000 Series и RX 500 Series, будут нормально работать без опции `--precision full --no-half`, что сэкономит много оперативной памяти. (отмечено [здесь] (https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/5468).)

С этого момента всегда используйте эту новую команду запуска, а также при перезапуске веб-интерфейса в следующих запусках.
идентификатор-контейнера&gt;

                </section>
            </div>
<div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title">
<span class="search-results-count"></span> results matching "<span class="search-query"></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class="search-query"></span>"</h1>
    </div>
</div>
</div>
    </div>
</div>

<script>
MathJax = {
  tex: {
    inlineMath: [ ['$', '$'], ['\\(', '\\)'] ]
  },
  svg: {
    fontCache: 'global'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>

                        <a href="/sdwui-docs/ru/features/" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Функции">
                            <i class="fa fa-angle-left"></i>
                        </a>
                    

                    
                        <a href="/sdwui-docs/ru/install-on-nvidia/" class="navigation navigation-next navigation-unique" aria-label="Next page: установить на нвидиа">
                            <i class="fa fa-angle-right"></i>
                        </a>
                    
                </div>
            </div>

            <script>
            var gitbook = gitbook || [];
            gitbook.push(function() {
                gitbook.page.hasChanged({
    "page": {
        "title": "Introduction",
        "level": "1.1",
        "depth": 1,
        
        "next": {
            "title": "установить на нвидиа",
            "level": "1.2",
            "depth": 1,
            "path": "_pages/ru/Install-and-Run-on-NVidia-GPUs.md",
            "ref": "_pages/ru/Install-and-Run-on-NVidia-GPUs.md",
            "articles": []
        },
        
        "dir": "ltr"
    },    "config": {
        "plugins": ["fontsettings", "highlight", "livereload", "lunr", "search", "sharing", "theme-default", "livereload"],
        "styles": {
            "ebook": "styles/ebook.css",
            "epub": "styles/epub.css",
            "mobi": "styles/mobi.css",
            "pdf": "styles/pdf.css",
            "print": "styles/print.css",
            "website": "styles/website.css"
        },
        "pluginsConfig": {
            "fontsettings": {
                "family": "sans",
                "size": 2,
                "theme": "white"
            },
            "highlight": {},
            "livereload": {},
            "lunr": {
                "ignoreSpecialCharacters": false,
                "maxIndexSize": 1000000
            },
            "search": {},            "sharing": {
                "all": ["facebook", "google", "twitter", "weibo", "instapaper", "github", "telegram"],
                "facebook": true,
                "google": false,
                "github": true,
                "github_link": "https://github.com",
                "telegram": false,
                "telegram_link": "https://t.me",
                "instapaper": false,
                "twitter": true,
                "vk": false,
                "weibo": false
            },
"theme-default": {
                "showLevel": false,
                "styles": {
                    "ebook": "styles/ebook.css",
                    "epub": "styles/epub.css",
                    "mobi": "styles/mobi.css",
                    "pdf": "styles/pdf.css",
                    "print": "styles/print.css",
                    "website": "styles/website.css"
                }
            }
        },
        "theme": "default",
        "author": "Tao He",
        "pdf": {
            "pageNumbers": true,
            "fontSize": 12,
            "fontFamily": "Arial",
            "paperSize": "a4",
            "chapterMark": "pagebreak",
            "pageBreaksBefore": "/",
            "margin": {
                "right": 62,
                "left": 62,
                "top": 56,
                "bottom": 56
            }
        },
        "structure": {
            "langs": "LANGS.md",
            "readme": "README.md",
        },
        "variables": {},
        "title": "Stable Diffusion webUI",
        "language": "en",
        "gitbook": "*"
    },
    "file": {
        "path": "_pages/ru/Install-and-Run-on-AMD-GPUs.md",
        "mtime": "",
        "type": "markdown"
    },
    "gitbook": {
        "version": "3.2.3",
        "time": "2022-12-27 19:50:15 +0300"
    },
    "basePath": "/sdwui-docs",
    "book": {
        "language": ""
    }
});
            });
            </script>
        </div><script src="/sdwui-docs/assets/gitbook/gitbook.js"></script>
<script src="/sdwui-docs/assets/gitbook/theme.js"></script>

<script src="/sdwui-docs/assets/gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
<script src="/sdwui-docs/assets/gitbook/gitbook-plugin-sharing/buttons.js"></script>

<!-- <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
<script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
<script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
<script src="../gitbook/gitbook-plugin-search/search.js"></script> -->

<script src="/sdwui-docs/assets/gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
<script src="/sdwui-docs/assets/gitbook/gitbook-plugin-search-pro/search.js"></script>
<script src="/sdwui-docs/assets/gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>

</body>
</html>